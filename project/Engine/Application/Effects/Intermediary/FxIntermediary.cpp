#include "FxIntermediary.h"

#include <Engine/Application/Effects/FxSystem.h>
#include <Engine/Application/Effects/Particle/Emitter/FxEmitter.h>
#include <Engine/Scene/Context/SceneContext.h>

/////////////////////////////////////////////////////////////////////////////////////////
//		インスタンス取得
/////////////////////////////////////////////////////////////////////////////////////////
FxIntermediary* FxIntermediary::GetInstance() {
	static FxIntermediary instance;
	return &instance;
}

/////////////////////////////////////////////////////////////////////////////////////////
//		リストに登録
/////////////////////////////////////////////////////////////////////////////////////////
void FxIntermediary::Attach(FxEmitter* fxEmitter) {
	if (pSceneContext_) {
		pSceneContext_->GetFxSystem()->AddEmitter(fxEmitter);
	}
}

/////////////////////////////////////////////////////////////////////////////////////////
//		リストから削除
/////////////////////////////////////////////////////////////////////////////////////////
void FxIntermediary::Detach(FxEmitter* emitter) {
	if (pSceneContext_) {
		pSceneContext_->GetFxSystem()->RemoveEmitter(emitter);
	}
}

/////////////////////////////////////////////////////////////////////////////////////////
//		現在のシーンのcontextをセット
/////////////////////////////////////////////////////////////////////////////////////////
void FxIntermediary::SetSceneContext(SceneContext* context) {
	pSceneContext_ = context;
}
